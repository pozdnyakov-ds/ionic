import{u as F,r,a as K,o as Y,b as M,c as Q,w as s,d as a,e as n,f as t,I as R,g as S,h as $,i as U,j as v,k as m,l as g,m as W,n as X,p as Z,q as ee,s as L,t as u,v as ae,x as te,y as ne,z as le,A as oe,B as se,C as ie}from"./index-6bc4be0b.js";const re="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' d='M416 128L192 384l-96-96' class='ionicon-fill-none ionicon-stroke-width'/></svg>",de="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' d='M368 368L144 144M368 144L144 368' class='ionicon-fill-none ionicon-stroke-width'/></svg>",pe="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M400 148l-21.12-24.57A191.43 191.43 0 00240 64C134 64 48 150 48 256s86 192 192 192a192.09 192.09 0 00181.07-128' stroke-linecap='round' stroke-miterlimit='10' class='ionicon-fill-none ionicon-stroke-width'/><path d='M464 97.42V208a16 16 0 01-16 16H337.42c-14.26 0-21.4-17.23-11.32-27.31L436.69 86.1C446.77 76 464 83.16 464 97.42z'/></svg>",ce="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M380.93 57.37A32 32 0 00358.3 48H94.22A46.21 46.21 0 0048 94.22v323.56A46.21 46.21 0 0094.22 464h323.56A46.36 46.36 0 00464 417.78V153.7a32 32 0 00-9.37-22.63zM256 416a64 64 0 1164-64 63.92 63.92 0 01-64 64zm48-224H112a16 16 0 01-16-16v-64a16 16 0 0116-16h192a16 16 0 0116 16v64a16 16 0 01-16 16z' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>",ue="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M262.29 192.31a64 64 0 1057.4 57.4 64.13 64.13 0 00-57.4-57.4zM416.39 256a154.34 154.34 0 01-1.53 20.79l45.21 35.46a10.81 10.81 0 012.45 13.75l-42.77 74a10.81 10.81 0 01-13.14 4.59l-44.9-18.08a16.11 16.11 0 00-15.17 1.75A164.48 164.48 0 01325 400.8a15.94 15.94 0 00-8.82 12.14l-6.73 47.89a11.08 11.08 0 01-10.68 9.17h-85.54a11.11 11.11 0 01-10.69-8.87l-6.72-47.82a16.07 16.07 0 00-9-12.22 155.3 155.3 0 01-21.46-12.57 16 16 0 00-15.11-1.71l-44.89 18.07a10.81 10.81 0 01-13.14-4.58l-42.77-74a10.8 10.8 0 012.45-13.75l38.21-30a16.05 16.05 0 006-14.08c-.36-4.17-.58-8.33-.58-12.5s.21-8.27.58-12.35a16 16 0 00-6.07-13.94l-38.19-30A10.81 10.81 0 0149.48 186l42.77-74a10.81 10.81 0 0113.14-4.59l44.9 18.08a16.11 16.11 0 0015.17-1.75A164.48 164.48 0 01187 111.2a15.94 15.94 0 008.82-12.14l6.73-47.89A11.08 11.08 0 01213.23 42h85.54a11.11 11.11 0 0110.69 8.87l6.72 47.82a16.07 16.07 0 009 12.22 155.3 155.3 0 0121.46 12.57 16 16 0 0015.11 1.71l44.89-18.07a10.81 10.81 0 0113.14 4.58l42.77 74a10.8 10.8 0 01-2.45 13.75l-38.21 30a16.05 16.05 0 00-6.05 14.08c.33 4.14.55 8.3.55 12.47z' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>",ye="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M112 112l20 320c.95 18.49 14.4 32 32 32h184c17.67 0 30.87-13.51 32-32l20-320' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><path stroke-linecap='round' stroke-miterlimit='10' d='M80 112h352' class='ionicon-stroke-width'/><path d='M192 112V72h0a23.93 23.93 0 0124-24h80a23.93 23.93 0 0124 24h0v40M256 176v224M184 176l8 224M328 176l-8 224' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>";const ve=(c,T)=>{const I=c.__vccOpts||c;for(const[b,e]of T)I[b]=e;return I},d=c=>(se("data-v-37a28ecd"),c=c(),ie(),c),me={class:"content"},ge=["src"],fe={key:0,class:"logo"},_e=d(()=>t("div",{style:{"font-size":"32pt","margin-bottom":"10px"}},"Display24",-1)),xe=d(()=>t("div",{class:"logo-no-code"},[t("div",{style:{"font-size":"14pt",color:"#fff"}},"Необходимо установить параметры дисплея")],-1)),he={key:1,class:"panel"},ke=d(()=>t("br",null,null,-1)),we={style:{"font-size":"80%"}},Ce=d(()=>t("br",null,null,-1)),Te={style:{width:"100%",display:"flex","align-items":"center","justify-content":"space-between"}},Ie=d(()=>t("div",{style:{color:"#fff"}},[t("b",null,"Проверить код дисплея: ")],-1)),Ne={class:"params"},De={width:"100%"},Me=d(()=>t("td",{class:"params-item"},"Партнер:",-1)),be={class:"readyData"},Be=d(()=>t("td",{class:"params-item"},"Код дисплея:",-1)),Re={class:"readyData"},Se=d(()=>t("td",{class:"params-item"},"Наименование дисплея:",-1)),$e={class:"readyData"},Le=d(()=>t("td",{class:"params-item"},"Описание дисплея:",-1)),Ge={class:"readyData"},je=d(()=>t("td",{class:"params-item"},"Группа дисплея:",-1)),ze={class:"readyData"},Ae=d(()=>t("td",{class:"params-item"},"Макет:",-1)),Oe={class:"readyData"},Ve={__name:"Home",setup(c){F();const T=r(0),I=r("production"),b="https://display24.ru";var e=K({partnerId:null,partnerName:null,partnerLogo:null,displayCode:null,displayCodeInput:null,displayName:null,displayDescription:null,displayGroup:null,displayToken:null,layoutName:null,osVersion:null,dataReady:!1});const y=r(""),p=r(""),N=r(""),f=r(""),_=r(""),x=r(""),h=r(""),k=r(""),D=r(!1),w=r(!1),C=r(""),G=()=>e.partnerLogo&&e.partnerLogo.length?"https://storage.yandexcloud.net/d24/partners/"+e.partnerId+"/"+e.partnerLogo:"img/logo_512.png",j=()=>{T.value++},z=()=>{D.value=!0,setTimeout(()=>{e=localStorage.getItem("settings",null)?JSON.parse(localStorage.getItem("settings"),null):{},N.value.innerText=e.displayCode?e.displayCode:"-",f.value.innerText=e.partnerName?e.partnerName:"-",_.value.innerText=e.displayName?e.displayName:"-",x.value.innerText=e.displayDescription?e.displayDescription:"-",h.value.innerText=e.displayGroup?e.displayGroup:"-",k.value.innerText=e.layoutName?e.layoutName:"-"},1e3)},B=i=>{f.value.innerText="-",_.value.innerText="-",x.value.innerText="-",h.value.innerText="-",k.value.innerText="-",p.value.$el.style.borderRadius="50px",p.value.$el.style.border="3px solid orange",C.value.innerText="Ошибка: "+i},A=i=>{e.displayCodeInput=i.target.value,y.value.innerText=i.target.value},O=()=>{const i=y.value&&y.value.$el&&y.value.$el.value?y.value.$el.value:"";J(i)},V=()=>{e.dataReady&&localStorage.setItem("settings",JSON.stringify(e)),D.value=!1},H=()=>{localStorage.removeItem("settings"),e.partnerId=null,e.partnerName=null,e.partnerLogo=null,e.displayCode=null,e.displayCodeInput=null,e.displayName=null,e.displayDescription=null,e.displayGroup=null,e.displayToken=null,e.layoutName=null,e.dataReady=!1,f.value.innerText="-",N.value.innerText="-",_.value.innerText="-",x.value.innerText="-",h.value.innerText="-",k.value.innerText="-",C.value.innerText=""},E=()=>{D.value=!1},P=i=>{i.clientY<=100?(w.value=!0,setTimeout(()=>{e.displayCode||(w.value=!1)},1e4)):w.value=!1},q=()=>{e.displayCode||(w.value=!0)},J=async i=>{if(p.value.$el.style.border="0px solid transparent",C.value.innerText="",!i||i&&i.length<10){p.value.$el.style.borderRadius="50px",p.value.$el.style.border="3px solid orange",C.value.innerText="Указать код дисплея (10 символов)";return}var l=null;e.dataReady=!1;try{const o=await fetch(b+"/mobile-api/v1/device/"+i,{method:"GET",headers:{"Content-Type":"application/json"}});if(!o.ok)throw new Error("Request failed");l=await o.json(),console.log("Data: ",l)}catch(o){B(o),e.dataReady=!1;return}if(l&&l.data&&l.data.length==0){B("Код не существует");return}if(l&&l.code&&l.code==200&&l.data.length>0){const o=l.data[0];e.partnerId=o.partner_id,e.partnerName=o.partner_name,e.partnerLogo=o.partner_logo&&o.partner_logo.filename?o.partner_logo.filename:null,e.displayCode=o.display_code,e.displayName=o.display_name,e.displayDescription=o.display_description,e.displayGroup=o.display_group_name,e.displayToken=o.display_token,e.layoutName=o.layout_name,f.value.innerText=e.partnerName,N.value.innerText=e.displayCode,_.value.innerText=e.displayName,x.value.innerText=e.displayDescription,h.value.innerText=e.displayGroup,k.value.innerText=e.layoutName,e.dataReady=!0,p.value.$el.style.borderRadius="50px",p.value.$el.style.border="3px solid green"}else{B("Ошибка чтения настроек");return}};return Y(()=>{q()}),(i,l)=>(M(),Q(a(oe),null,{default:s(()=>[n(a(R),{fullscreen:!0,onClick:l[4]||(l[4]=o=>le(e)?e.value=!a(e):e=!a(e))},{default:s(()=>[t("div",{id:"container",onMouseover:P},[t("div",me,[n(a(R),null,{default:s(()=>[a(e).dataReady?(M(),S("iframe",{src:"https://display24.ru/device?code="+a(e).displayCode,style:{width:"100%",height:"100%"},scrolling:"yes",key:T.value},"\n            ",8,ge)):$("",!0)]),_:1})]),a(e).dataReady?$("",!0):(M(),S("div",fe,[n(a(U),{src:G(),alt:a(e).partnerName,style:{width:"250px","margin-bottom":"30px"}},null,8,["src","alt"]),_e,xe])),w.value||!a(e).dataReady?(M(),S("div",he,[n(a(v),{onClick:m(j,["prevent"]),shape:"round",fill:"solid",color:"primary"},{default:s(()=>[n(a(g),{slot:"icon-only",icon:a(pe)},null,8,["icon"])]),_:1},8,["onClick"]),n(a(v),{onClick:m(z,["prevent"]),shape:"round",fill:"solid",color:"primary"},{default:s(()=>[n(a(g),{slot:"icon-only",icon:a(ue)},null,8,["icon"])]),_:1},8,["onClick"])])):$("",!0),n(a(W),{"is-open":D.value},{default:s(()=>[n(a(X),null,{default:s(()=>[n(a(Z),null,{default:s(()=>[n(a(ee),null,{default:s(()=>[L("Настройки приложения"),ke,L(),t("span",we,"Режим: ["+u(I.value)+"]",1)]),_:1}),Ce,n(a(ae),{slot:"end"},{default:s(()=>[n(a(v),{onClick:l[0]||(l[0]=m(o=>H(),["prevent"])),shape:"round",fill:"solid",color:"primary",style:{margin:"20px 10px 20px 20px"}},{default:s(()=>[n(a(g),{slot:"icon-only",icon:a(ye),style:{margin:"15px 0 15px 0"}},null,8,["icon"])]),_:1}),n(a(v),{onClick:l[1]||(l[1]=m(o=>V(),["prevent"])),shape:"round",fill:"solid",color:"primary",style:{margin:"20px 10px 20px 10px"}},{default:s(()=>[n(a(g),{slot:"icon-only",icon:a(ce),style:{margin:"15px 0 15px 0"}},null,8,["icon"])]),_:1}),n(a(v),{onClick:l[2]||(l[2]=m(o=>E(),["prevent"])),shape:"round",fill:"solid",color:"primary",style:{margin:"20px 20px 20px 10px"}},{default:s(()=>[n(a(g),{slot:"icon-only",icon:a(de),style:{margin:"15px 0 15px 0"}},null,8,["icon"])]),_:1})]),_:1})]),_:1})]),_:1}),n(a(R),{class:"ion-padding"},{default:s(()=>[t("div",Te,[Ie,n(a(te),{ref_key:"displayCodeBorder",ref:p},{default:s(()=>[n(a(ne),{ref_key:"displayCodeInput",ref:y,value:a(e).displayCode,onInput:A,placeholder:""},null,8,["value"])]),_:1},512),n(a(v),{onClick:l[3]||(l[3]=m(o=>O(),["prevent"])),shape:"round",fill:"solid",color:"primary",style:{margin:"0px"}},{default:s(()=>[n(a(g),{slot:"icon-only",icon:a(re)},null,8,["icon"])]),_:1})]),t("div",Ne,[t("table",De,[t("tr",null,[Me,t("td",be,[t("span",{ref_key:"partnerName",ref:f},u(a(e).partnerName),513)])]),t("tr",null,[Be,t("td",Re,[t("span",{ref_key:"displayCode",ref:N},u(a(e).displayCode),513)])]),t("tr",null,[Se,t("td",$e,[t("span",{ref_key:"displayName",ref:_},u(a(e).displayName),513)])]),t("tr",null,[Le,t("td",Ge,[t("span",{ref_key:"displayDescription",ref:x},u(a(e).displayDescription),513)])]),t("tr",null,[je,t("td",ze,[t("span",{ref_key:"displayGroup",ref:h},u(a(e).displayGroup),513)])]),t("tr",null,[Ae,t("td",Oe,[t("span",{ref_key:"layoutName",ref:k},u(a(e).layoutName),513)])])])]),t("div",{ref_key:"error",ref:C,style:{color:"orange",width:"100%","text-align":"center","margin-top":"20px"}},null,512)]),_:1})]),_:1},8,["is-open"])],32)]),_:1})]),_:1}))}},Ee=ve(Ve,[["__scopeId","data-v-37a28ecd"]]);export{Ee as default};
